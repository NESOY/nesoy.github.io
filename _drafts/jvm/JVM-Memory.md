## JVM 구조
- 클래스 로더가 바이트 코드를 읽어서 메모리에 배치하고 이 코드가 실행될 때 스레드가 생성됩니다.
- 스레드마다 메모리 자원이 할당되고 할당된 메모리에는 스택, PC, Heap 등이 만들어집니다.
- 실행 엔진을 통해서 메모리에 적재된 내용을 interpreting하는데 하나 하나 하기엔 비효율적이니, JIT나 GC를 통해서 효율적으로 스케줄과 메모리를 관리합니다.
- 이 과정에서 성능을 높이기 위해서 네이티브 메소드 인터페이스 기반 네이티브 메소드 라이브러리를 사용할 수 있습니다

## JVM이 시작하면서 종료될때까지
- JVM은 다른 프로그램과 같이 OS의 프로세스로 실행이 된다.
    - 메모리를 할당받아서 실행된다.
    - 메모리는 총 5 영역으로 나뉘어 관리된다.
        - stack
            - 쓰레드 마다 런 타임 스택을 만들고, 그 안에 메소드 호출을 스택
        - pc registers
            - 쓰레드 마다 쓰레드 내 현재 실행할 스택 프레임을 가리키는 포인터가 생성된다.
        - native method stack
            - 쓰레드마다 생김
        - heap
            - 객체를 저장, 공유자원
        - method
            - 클래스 이름, 부모 클래스 이름, 메소드, 변수 - 저장 공유 자원

- OS에서는 어느 정도 크기의 메모리를 JVM에게 할당할까?

## 메모리
- 메모리는 크게 5개의 영역으로 나눠진다.
- 메모스 영역에는 클래스 수준의 정보(클래스 이름, 부모 클래스 이름, 메소드, 변수) 저장, 공유 자원이다.
- 힙 영역에는 객체를 저장, 공유 자원이다.
- 나머지는 스레드에 국한된다.힙이나 메서드는 다른 스레들끼리 공유 가능하다.
- 스택 영역에는 쓰레드마다 런타임 스택을 만들고, 그 안에 메소드 호출을 스택
- 메서드 호출 스택이 쌓여있다. 에러가 날 때 보이는?
- 프레임이라 부르는 블록으로 쌓는다. 쓰레드 종료하면 런타임 스택도 사라진다.
- PC(Program counter) 레지스터, 쓰레드 마다 쓰레드 내 현재 실행할 스택 프레임을 가리키는 포인터가 생성된다.
- 네이티브 메소드 스택: 쓰레듬마다 생김
- <https://javapapers.com/core-java/java-jvm-run-time-data-areas/#Program_Counter_PC_Register>
    - 네이티브 메서드는 메서드에 네이티브라는 키워드가 붙어있음
    - Thread.currentThread()가 대표적